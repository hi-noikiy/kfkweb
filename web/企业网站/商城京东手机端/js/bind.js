function subLoginForm(){var b=$.trim($("#loginName").val());var a=$.trim($("#password").val());if(b.length==0){$("#loginNameError").html("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a");$("#loginNameError").show();return}if(a.length==0){$("#passwordError").html("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a");$("#passwordError").show();return}$("#loginForm").submit()}function refreshCaptcha(b,a){$.ajax({url:"/login/authCode.json",data:{openId:"+openId+",type:"+type+"},success:function(c){$("#captchaImg").attr("src","data:image/gif;base64,"+c.authCode)}})}$(function(){$("#loginName").bind("focus",function(){$("#loginNameError").html("");$("#loginNameError").hide();$("#error").html("");$("#error").hide()});$("#loginName").bind("blur",function(){$("#loginNameError").html("");$("#loginNameError").hide();$("#error").html("");$("#error").hide()});$("#tel").bind("focus",function(){$("#telError").html("");$("#telError").hide();$("#error").html("");$("#error").hide()});$("#tel").bind("blur",function(){$("#telError").html("");$("#telError").hide();$("#error").html("");$("#error").hide()});$("#password").bind("focus",function(){$("#passwordError").html("");$("#passwordError").hide();$("#error").html("");$("#error").hide()});$("#password").bind("blur",function(){$("#passwordError").html("");$("#passwordError").hide();$("#error").html("");$("#error").hide()});$("#checkPwd").bind("focus",function(){$("#checkPwdError").html("");$("#checkPwdError").hide();$("#error").html("");$("#error").hide()});$("#checkPwd").bind("blur",function(){$("#checkPwdError").html("");$("#checkPwdError").hide();$("#error").html("");$("#error").hide()});$("#captcha").bind("focus",function(){$("#captchaError").html("");$("#captchaError").hide();$("#error").html("");$("#error").hide()});$("#captcha").bind("blur",function(){$("#captchaError").html("");$("#captchaError").hide();$("#error").html("");$("#error").hide()});$("#smsCode").bind("focus",function(){$("#smsCodeError").html("");$("#smsCodeError").hide();$("#error").html("");$("#error").hide()});$("#smsCode").bind("blur",function(){$("#smsCodeError").html("");$("#smsCodeError").hide();$("#error").html("");$("#error").hide()})});var _mobileMap=new Object();function chkMobile(){var c=$("#tel").val();if(!/^1\d{10}$/.test(c)){return}var a=window.location.href;if(c in _mobileMap){var b=_mobileMap[c];if(b.status==2){if(a.indexOf("mobileBind")!=-1){$("#telError").html('\u8be5\u624b\u673a\u53f7\u5df2\u88ab\u53e6\u4e00\u8d26\u53f7\u6ce8\u518c\uff0c\u8bf7\u6362\u4e2a\u624b\u673a\u53f7\u3002<a class="tip-icon help-icon" href="javascript:showLoginTip()"></a>')}else{$("#telError").html('\u8be5\u624b\u673a\u53f7\u5df2\u88ab\u53e6\u4e00\u4e2a\u8d26\u53f7\u6ce8\u518c\uff0c\u8bf7<a href="'+$.trim($("#loginBindUrl").html())+'" class="go-bind">\u76f4\u63a5\u4e0e\u8be5\u8d26\u53f7\u5173\u8054</a>\uff0c\u6216\u8005\u6362\u4e2a\u624b\u673a\u53f7\u7ed1\u5b9a<a class="tip-icon help-icon" href="javascript:showRegTip()"></a>')}_("#tel").parent("div").addClass("invalid");$("#telError").show();return}else{if(b.status==0){return}}}$.ajax({url:"/login/chkMobile.json",data:{mobile:c},dataType:"json",success:function(d){if(d&&d.status){if(d.status==2){if(a.indexOf("mobileBind")!=-1){$("#telError").html('\u8be5\u624b\u673a\u53f7\u5df2\u88ab\u53e6\u4e00\u8d26\u53f7\u6ce8\u518c\uff0c\u8bf7\u6362\u4e2a\u624b\u673a\u53f7\u3002<a class="tip-icon help-icon" href="javascript:showLoginTip()"></a>')}else{$("#telError").html('\u8be5\u624b\u673a\u53f7\u5df2\u88ab\u53e6\u4e00\u4e2a\u8d26\u53f7\u6ce8\u518c\uff0c\u8bf7<a href="'+$.trim($("#loginBindUrl").html())+'" class="go-bind">\u76f4\u63a5\u4e0e\u8be5\u8d26\u53f7\u5173\u8054</a>\uff0c\u6216\u8005\u6362\u4e2a\u624b\u673a\u53f7\u7ed1\u5b9a<a class="tip-icon help-icon" href="javascript:showRegTip()"></a>')}_("#tel").parent("div").addClass("invalid");$("#telError").show();_mobileMap[c]=d;return}else{if(d.status==0){_mobileMap[c]=d;return}}}}})}function sendSmsCode(){var e=$("#openId").val();var c=$("#type").val();var a=$("#tel").val();var d=$("#bkey").val();var b=$("#jdPin").val();$.ajax({url:"/login/sendSms.json",data:{mobile:a,openId:e,type:c,bkey:d,jdPin:b},dataType:"json",success:function(h){if(h&&h.status){if(h.status==0){if(h.msg){alert(h.msg);return}else{alert("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25")}}else{if(h.status==1){$("#smsCodeContent").html("<span>\u91cd\u65b0\u83b7\u53d6(120s)</span>");$("#smsCodeContent").unbind("click");var g=new Date().getTime();var f=setInterval(function(){var i=parseInt((new Date().getTime()-g)/1000);if(i<120){$("#smsCodeContent").html("<span>\u91cd\u65b0\u83b7\u53d6("+(120-i)+"s)</span>")}else{$("#smsCodeContent").html('<span onclick="sendSmsCode()">\u83b7\u53d6\u9a8c\u8bc1\u7801</span>');clearInterval(f);$("#smsCodeContent").bind("click",sendSmsCode)}},1000);return}}}else{alert("\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25")}}})}$(function(){$("#tel").bind("blur",function(){chkMobile()});$("#smsCodeContent").bind("click",sendSmsCode)});var _=jQuery;_(function(){var e=_("#registerForm");var c=["tel","smsCode","password","checkPwd"];function a(h,f){var g=_("#"+h+"Error");_("#"+h).parent("div").addClass("invalid");g.html(f);g.show()}function d(){c.forEach(function(f){_("#"+f).focus(function(){_("#"+f+"Error").hide();_("#"+f).parent("div").removeClass("invalid")})})}function b(){for(var h=0;h<c.length;h++){if(!_("#"+c[h]).val().trim()){a(c[h],_("#"+c[h]).attr("valName")+"\u4e0d\u80fd\u4e3a\u7a7a");return}}if(_("#checkPwd").val()!=_("#password").val()){a("checkPwd","\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4");return}if($("#agree")&&$("#agree").html()){if(!_(".checkbox").hasClass("checkbox-checked")){alert("hey,\u5fc5\u987b\u540c\u610f\u4eac\u4e1c\u7528\u6237\u534f\u8bae");return}}var g=$("#tel").val();if(!/^1\d{10}$/.test(g)){a("tel","\u65e0\u6548\u624b\u673a\u53f7");return}var f=$("#password").val();if(f.length<6){a("password","\u5bc6\u7801\u957f\u5ea6\u81f3\u5c116\u4f4d");return}$("#registerForm").submit()}_(".sqr-checkbox").click(function(){var f=_(this);f.toggleClass("checked");if(f.hasClass("checked")){$("#submitForm").css("background","#c00000");$("#submitForm").removeClass("new-abtn-default")}else{$("#submitForm").css("background","#999");$("#submitForm").addClass("new-abtn-default")}});$("#submitForm").click(function(){if(!_(this).hasClass("new-abtn-default")){b()}});d()});function createMask(){if($("#_mask")){$("#_mask").remove()}var e=((document.body||document.documentElement).clientHeight+60);var c=$(window).height();var a=(e<c?c:e)+"px";var d="100%";var b=document.createElement("div");b.setAttribute("class","mask");b.setAttribute("id","_mask");b.setAttribute("style","left:0px;top:0px;width:"+d+";height:"+a+";");(document.body||document.documentElement).appendChild(b)}function getLeft(){var a=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;var c=document.documentElement.clientWidth||document.body.clientWidth;var b="50%";document.getElementById("_alert").style.left=b+"px"}function getTop(){var b=200;var a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;var c=document.documentElement.clientHeight||document.body.clientHeight;document.getElementById("_alert").style.top=((c-b)/2+a)+"px"}$(function(){getLeft();$(window).bind("resize",function(){getLeft();getTop()})});function hideMask(){if($("#_mask")){$("#_mask").remove()}}function hideAlert(){$("#_alertMsg").html("&nbsp;");$("#_alert").hide();hideMask()}window.alert=function(a){setTimeout(function(){getLeft();getTop();$("#_alertMsg").html(a);$("#_alertBtn").unbind("click");$("#_alertBtn").click(hideAlert);createMask();$("#_alert").show()},1)};function showRegTip(){$(".mask").show();$("#regTip").show()}function hideRegTip(){$(".mask").hide();$("#regTip").hide()}function showLoginTip(){$(".mask").show();$("#bindTip").show()}function hideLoginTip(){$(".mask").hide();$("#bindTip").hide()};