var pageUserPassword=function(a,b,c){var d={amountDisable:"disabled",events:{verify:"click.action.verify.code",verifyP:"click.action.verify.psw",get:"click.action.get.code",clear:"click.action.clear.text"}},e={module:$('[data-validform="forgetForm"]'),moduleP:$('[data-validform="passwordForm"]'),userVerifyCode:'[data-action="passwordForget"]',userPswSet:'[data-action="passwordSet"]',userGetCode:'[data-action="getCode"]',userClearCon:".btn-delete",inputs:{phone:'input[name="inputMoblie"]',code:'input[name="inputCode"]'},inputp:{psw:'input[name="inputPassword"]'}},f={validObj:[],triggerEventFocus:["focus","blur"],triggerEventKeyDown:["keyup","change"],config:{tiptype:2,tipSweep:!1,showAllError:!1,postonce:!0,ajaxPost:!1},action:{valid:function(a){f.formVal(a,$(this),"verify")},get:function(a){f.codes(a,$(this),"code")},validPassword:function(a){f.formPswVal(a,$(this),"password")},clear:function(){b.empty.call($(this))}},initConfig:function(a){var c=$.extend(!0,f.config,b.validate.util.tipmsg,a||{});return c},formPswVal:function(a,d,g){var h={elem:d,curform:e.moduleP,onCorrect:null,password:d.parent().prev().find(e.inputp.psw),type:g};f.formValid(h,!1,function(a){if(e.module[0].mobile==c||e.module[0].verify==c)return b.dialogBlack("非法操作！"),!1;h.elem.html("&nbsp;").attr("disabled",!0),$("<div />",{"class":"navbar-mask"}).html('<img src="view-src/touch/images/common/loading-big.gif" style="width:20px;margin-right:10px;" /> 提交中...').appendTo(h.elem.parent());var d={url:"ajaxapi-resetpwd.html?",data:{mobile:e.module[0].mobile,verify:e.module[0].verify,pwd:h.password.val()},dataType:"json",type:"POST"};d.error=function(){a[0].status="normal",h.elem.html("完 成").attr("disabled",!1).next().remove(),b.dialogBlack("网络加载异常，请刷新页面重试")},d.success=function(c){if(a[0].status="normal",h.elem.html("完 成").attr("disabled",!1).next().remove(),c&&null!=c&&void 0!=c&&c.status)switch(c.code){case 1:a[0].status="posted",b.dialogBlack(c.msg),setTimeout(function(){self.location.href="login.html"},2e3);break;case 0:b.dialogBlack(c.msg);break;default:b.dialogBlack(c.msg)}else b.dialogBlack("网络加载异常，请刷新页面重试")},$.ajax(d)})},formVal:function(a,c,d){var g={elem:c,curform:e.module,onCorrect:null,phone:c.parent().prev().find(e.inputs.phone),code:c.parent().prev().find(e.inputs.code),type:d};g.curform[0].status="normal",f.formValid(g,!1,function(a){g.elem.html("&nbsp;").attr("disabled",!0),$("<div />",{"class":"navbar-mask"}).html('<img src="view-src/touch/images/common/loading-big.gif" style="width:20px;margin-right:10px;" /> 提交中...').appendTo(g.elem.parent());var c={url:"ajaxapi-checkverify.html?",data:{mobile:g.phone.val(),verify:g.code.val()},dataType:"json",type:"POST"};c.error=function(){a[0].status="normal",g.elem.html("完 成").attr("disabled",!1).next().remove(),b.dialogBlack("网络加载异常，请刷新页面重试")},c.success=function(c){if(a[0].status="normal",g.elem.html("完 成").attr("disabled",!1).next().remove(),c&&null!=c&&void 0!=c&&c.status)switch(c.code){case 1:a[0].status="posted",a[0].mobile=g.phone.val(),a[0].verify=g.code.val(),a.hide().next().show();break;default:b.dialogBlack("验证码错误，请重试")}else b.dialogBlack("网络加载异常，请刷新页面重试")},$.ajax(c)})},formValid:function(a,c,d){var e,g=a.curform,h=!0,i=f.initConfig(a);return"posting"===g[0].status?!1:i.postonce&&"posted"===g[0].status?!1:(g.find("[datatype]").each(function(){if(c)return!1;if($(this).is(":hidden")||"dataIgnore"===$(this).data("dataIgnore"))return!0;if(!$(this).attr("datatype"))return!1;var a=b.validate.util.getValue.call(g,$(this)),d=$(this);return e=b.validate.util.regcheck.call(g,$(this).attr("datatype"),a,$(this),i),e.passed?void 0:i.showAllError?(h&&(h=!1),!0):(d.focus(),h=!1,!1)}),h?(g[0].status="posting",d(g)):!1)},checkValid:function(a,c,d){{var e=a.curform;a.elem[0]}switch(focusTxt=a.elem.attr("placeholder"),returnObj=f.initConfig(a),c){case"blurValidator":var g=b.validate.util.getValue.call(e,a.elem),h=!0;return h=b.validate.util.regcheck.call(e,a.elem.attr("datatype"),g,a.elem,returnObj),h.passed?(b.validate.util.showMessage.call(e,h.info,returnObj.tiptype,{dom:a.elem,type:h.type,sweep:returnObj.tipSweep},"hide"),a.elem.parents("li").removeClass("error"),d(h),!0):(a.elem.parents("li").addClass("error"),b.validate.util.showMessage.call(e,h.info,returnObj.tiptype,{dom:a.elem,type:h.type,sweep:returnObj.tipSweep},"hide"),d(h),!1);default:return!1}},checkPhone:function(a){var b=$(this),c={elem:b,curform:e.module,onShow:"请输入手机号码",onFocus:"请输入有效的手机号码，确保信息送达",onCorrect:"",onEmpty:"请输入手机号码",onError:"请输入有效的手机号码",evType:a.type};f.checkValid(c,"blurValidator",function(a){a.passed?c.elem.parent().next().attr("disabled",!1).removeClass("disabled").addClass("btn-purple"):c.elem.parent().next().attr("disabled",!0).addClass("disabled").removeClass("btn-purple")},!1)},checkCode:function(a){var b=$(this),c={elem:b,curform:e.module,onShow:"请输入验证码",onFocus:"请输入验证码，填写有效的验证码",onCorrect:"",onEmpty:"请输入验证码",onError:"请输入有效的验证码",evType:a.type};f.checkValid(c,"blurValidator",function(a){a.passed?$(e.userVerifyCode).attr("disabled",!1).removeClass("disabled").addClass("btn-purple"):$(e.userVerifyCode).attr("disabled",!0).addClass("disabled").removeClass("btn-purple")},!1)},checkPassWord:function(a){var c=$(this),d={elem:c,curform:e.moduleP,onShow:"请输入验证码11",onFocus:"6-20位字母与数字组成,不含特殊符号",onCorrect:"",onEmpty:"请输入密码",onError:"6-20位字母与数字组成",evType:a.type},g=b.validate.util.getValue.call(d.curform,d.elem);g.length>0&&g.length<6&&(d.onError="密码太短,为6-20位字母与数字组成"),f.checkValid(d,"blurValidator",function(a){a.passed?$(e.userPswSet).attr("disabled",!1).removeClass("disabled").addClass("btn-purple"):$(e.userPswSet).attr("disabled",!0).addClass("disabled").removeClass("btn-purple")},!1)},codes:function(a,c){var d={elem:c.prev().find(e.inputs.phone),curform:e.module,onShow:"请输入手机号码",onFocus:"请输入手机号码焦点",onCorrect:"",onEmpty:"请输入手机号码",onError:"请输入有效的手机号码"};f.checkValid(d,"blurValidator",function(){c.attr("disabled",!0).removeClass("btn-purple").addClass("disabled");var a={url:"ajaxapi-sendverify.html?",data:{mobile:d.elem.val()},dataType:"json",type:"POST"};a.error=function(){c.attr("disabled",!1).addClass("btn-purple").removeClass("disabled"),b.dialogBlack("网络加载异常，请刷新页面重试")},a.success=function(a){if(c.attr("disabled",!1).addClass("btn-purple").removeClass("disabled"),a&&null!=a&&void 0!=a&&a.status){switch(a.code){case 1:break;case 0:b.dialogBlack(a.msg);break;default:b.dialogBlack(a.msg)}if(a.data>0){c.attr("disabled",!0).removeClass("btn-purple").addClass("disabled"),a.msg&&a.msg.length&&d.elem.parents("li").next().html(a.msg);var e={elem:c,startTime:a.data,timeStamp:{day:"",hour:"",min:"",sec:"s"},timeFormat:!1,action:"defined",halfwayTime:!1,callback:!0,message:"后重新获取",callbackFunction:function(){this.attr("disabled",!0).removeClass("btn-purple").addClass("disabled").html("获取验证码")},onDoCallback:!0,onDoComplete:function(a,b){b.complete(!0)}};b.countDown(e)}}else b.dialogBlack("网络加载异常，请刷新页面重试")},$.ajax(a)},!0)}},g={checkFormInput:function(){var a=$(e.inputs.phone),b=$(e.inputs.code),c=$(e.inputp.psw);a.on(f.triggerEventFocus[0],f.checkPhone).on(f.triggerEventFocus[1],f.checkPhone),a.on(f.triggerEventKeyDown[0],f.checkPhone).on(f.triggerEventKeyDown[1],f.checkPhone),b.on(f.triggerEventFocus[0],f.checkCode).on(f.triggerEventFocus[1],f.checkCode),b.on(f.triggerEventKeyDown[0],f.checkCode).on(f.triggerEventKeyDown[1],f.checkCode),c.on(f.triggerEventFocus[0],f.checkPassWord).on(f.triggerEventFocus[1],f.checkPassWord),c.on(f.triggerEventKeyDown[0],f.checkPassWord).on(f.triggerEventKeyDown[1],f.checkPassWord)}},h={events:function(){e.module.off(d.events.verify,e.userVerifyCode).on(d.events.verify,e.userVerifyCode,f.action.valid).off(d.events.get,e.userGetCode).on(d.events.get,e.userGetCode,f.action.get),e.moduleP.off(d.events.verifyP,e.userPswSet).on(d.events.verifyP,e.userPswSet,f.action.validPassword),$(e.userClearCon).off(d.events.clear).on(d.events.clear,f.action.clear)}},i={init:function(){h.events(),g.checkFormInput()}};$(function(){i.init()})}(window,hawk);