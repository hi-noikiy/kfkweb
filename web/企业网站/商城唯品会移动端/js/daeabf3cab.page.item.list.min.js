!function(a,b){function c(a){return a.find(".seldout").length>0}_.templateSettings={variable:"bean",evaluate:/#%([\s\S]+?)%#/g,interpolate:/#%=([\s\S]+?)%#/g,escape:/#%-([\s\S]+?)%#/g};{var d=_.template($("#item_list_tpl").html()),e=($(".u-pro-list"),$(".u-more-btn")),f=(b.createBarrier(e),e.data("query"),e.data("pagesize"),"img.j_item_image");window.handleStock=function(a){if(a&&(a.sold_out||a.sold_chance)){var b,d={};if(a.sold_out){var e=a.sold_out.split(",");for(b=0;b<e.length;b++)d["mid_"+e[b]]=1}if(a.sold_chance){var f=a.sold_chance.split(",");for(b=0;b<f.length;b++)d["mid_"+f[b]]=1}var g=$(".u-more-btn").data("page"),h=".rs-item.pg"+g;$(h).each(function(){var a=$(this),b=a.attr("data-mid");d["mid_"+b]?c(a)||a.find(".pic").append('<span class="seldout"></span>'):c(a)&&a.find(".seldout").remove()})}}}$(function(){$('[data-shopcart="true"]').length&&hawk.runCartTime()});var f="img.j_item_image";VIP.pager.config({el:$(".u-pro-list"),reqData:{},page:{limit:20},beforePage:function(){this.t1=+new Date,this.more.html(this.txtLoading)},mars:"product-list_page",url:"ajaxapi-itemlist.html?s="+(new Date).getTime(),init:function(){this.imageSelector=f,this.reqData.query=this.more.data("query")},formatData:function(a){return $.each(a,function(a,b){b.market_price=VIP.util.getPrice(b.market_price),b.vipshop_price=VIP.util.getPrice(b.vipshop_price),b.special_price=VIP.util.getPrice(b.special_price),b.fav_price=VIP.util.getPrice(b.fav_price)}),a},render:function(b){var c,e=this.page.page;c={page:e,itemList:b,brand_id:a.brand_id,filter_size:a.filter_size,efilter_size:a.efilter_size},this.el.append(d(c))}})}(pageContext,hawk.util);var VsmwebEffect=function(){var a=$('[data-thumbcate="list"]'),b=$(".drop_cate"),c=$("#B_cateWrap"),d=$("#B_listWrap"),e={slidePageDown:function(){if(this.elem.next().fadeIn("fast").parent().addClass("active"),this.elem.parent().next().hasClass("active")){var a=this.elem.parent().next().children().filter("a"),b={elem:a,direction:a.attr("data-dropmen"),child:a.next().children().find("h2")};e.slidePageRight.call(b)}},slidePageUp:function(){this.elem.next().fadeOut("fast").parent().removeClass("active")},slidePageLeft:function(){var a=this.elem.next().outerWidth(!0),b=(parseInt(this.elem.next().css("top"),10),{});if(!this.elem.next().is(":visible")){switch(this.direction){case"left":this.elem.next().css({left:"auto",right:"-"+a+"px",height:$(document).outerHeight()}),b.right="+="+a;break;default:this.elem.next().css({left:"-"+a+"px",right:"auto"}),b.left="+="+a}if(this.elem.next().show().animate(b,"fast").parent().addClass("active"),this.elem.parent().prev().hasClass("active")){var c=this.elem.parent().prev().children().filter("a"),d={elem:c,direction:c.attr("data-dropmen"),child:c.next().children().find("h2")};e.slidePageUp.call(d)}this.elem.next().undelegate('[data-dropClose="true"]',"click.drop.close").delegate('[data-dropClose="true"]',"click.drop.close",e.slidePageBottom),document.addEventListener("touchmove",e.touchEvent,!1)}},slidePageRight:function(){var a=this.elem.next().outerWidth(!0),b={};if(!this.elem.next().is(":hidden")){switch(this.direction){case"left":b.right="-="+a;break;default:b.left="-="+a}this.elem.next().animate(b,"fast",function(){$(this).hide()}).parent().removeClass("active"),document.removeEventListener("touchmove",e.touchEvent,!1)}},touchEvent:function(a){a.preventDefault()},slideCateinit:function(){var a=$(this),b={elem:a,direction:a.attr("data-dropmen"),child:a.next().children().find("h2")};b.direction&&"down"==b.direction?b.elem.next().is(":visible")?e.slidePageUp.call(b):e.slidePageDown.call(b):b.elem.next().is(":visible")?e.slidePageRight.call(b):e.slidePageLeft.call(b)},slidePageBottom:function(){var a=$(this),b={elem:a.parents(".trasp").prev(),direction:"left"};b.elem.next().is(":visible")&&e.slidePageRight.call(b)},slideMenuinit:function(){var a=$(this),b={elem:a,child:a.children("h2"),cartid:a.attr("data-cateid"),next:a.parents(".drop_cate").next().children().find(".category")};b.child.hasClass("active")||b.next.filter('[data-listid="'+b.cartid+'"]').is(":visible")||b.child.addClass("active").parent().siblings("li").children("h2").removeClass("active").parents(".drop_cate").next().children().children().children().filter('[data-listid="'+b.cartid+'"]').show("fast").siblings(".category").hide("fast")}},f={bindwindowCategory:function(){var a={wH:$(window).innerHeight(),hH:$(".header").innerHeight(),tH:$(".thumb-mode").innerHeight(),lE:$(".u-pro-list").children().filter("dl").length};0==window.orientation||180==window.orientation?a.lE?f.categoryStyle(a,.6):f.categoryStyle(a,.3):90==window.orientation||-90==window.orientation?f.categoryStyle(a,1):a.lE?f.categoryStyle(a,.6):f.categoryStyle(a,.3)},categoryStyle:function(a,b){return c.css({height:(a.wH-a.hH-a.tH)*b+"px"}),d.css({height:(a.wH-a.hH-a.tH)*b+"px"}),$(".drop_bottom").add($(".drop_bottom").children("a")).css({top:(a.wH-a.hH-a.tH)*b,height:a.wH-a.hH-a.tH-(a.wH-a.hH-a.tH)*b}),!1},categoryEvent:function(){var a=new iScroll("B_cateWrap",{checkDOMChanges:!0,onScrollStart:function(){a.refresh()}}),b=new iScroll("B_listWrap",{checkDOMChanges:!0,onScrollStart:function(){b.refresh()}})},cateInit:function(){c.length>0&&f.categoryEvent()}},g={bindEvents:function(){a.children().children().filter("a").off("click.made.classify").on("click.asyn.classify",e.slideCateinit),b.children().find("li").off("click.drop.menu").on("click.drop.menu",e.slideMenuinit)},init:function(){g.bindEvents(),c.length>0&&f.bindwindowCategory(),hawk.download()}};return{init:g.init,cateInit:f.cateInit}}();$(function(){VsmwebEffect.init(),VsmwebEffect.cateInit(),VIP.util.backToTopFix(),VIP.util.downloadApp.init(),VIP.util.navFix($(".J_nav"))});